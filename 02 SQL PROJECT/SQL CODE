CREATE TABLE Cities (
    CityID INT PRIMARY KEY,
    CityName TEXT,
    Country TEXT
);

CREATE TABLE Flights (
    FlightID INT PRIMARY KEY,
    DepartureCityID INT,
    ArrivalCityID INT,
    FlightCost REAL,
    FlightDate TEXT,
    FOREIGN KEY (DepartureCityID) REFERENCES Cities(CityID),
    FOREIGN KEY (ArrivalCityID) REFERENCES Cities(CityID)
);

CREATE TABLE Accommodations (
    AccommodationID INT PRIMARY KEY,
    CityID INT,
    HotelName TEXT,
    DailyCost REAL,
    NumberOfNights INT,
    FOREIGN KEY (CityID) REFERENCES Cities(CityID)
);

CREATE TABLE Activities (
    ActivityID INT PRIMARY KEY,
    CityID INT,
    ActivityName TEXT,
    ActivityCost REAL,
    FOREIGN KEY (CityID) REFERENCES Cities(CityID)
);

-- Insert data into the tables
INSERT INTO Cities (CityID, CityName, Country) VALUES
(1, 'Paris', 'France'),
(2, 'London', 'UK'),
(3, 'Rome', 'Italy'),
(4, 'Tokyo', 'Japan');

INSERT INTO Flights (FlightID, DepartureCityID, ArrivalCityID, FlightCost, FlightDate) VALUES
(101, 1, 2, 80.00, '2025-06-15'),
(102, 2, 3, 120.00, '2025-06-19'),
(103, 3, 1, 95.00, '2025-06-25'),
(104, 1, 4, 750.00, '2025-07-01');

INSERT INTO Accommodations (AccommodationID, CityID, HotelName, DailyCost, NumberOfNights) VALUES
(201, 1, 'Hotel Belle Ã‰poque', 150.00, 4),
(202, 2, 'The Grand Hotel', 180.00, 4),
(203, 3, 'Roman Holiday Inn', 110.00, 6);

INSERT INTO Activities (ActivityID, CityID, ActivityName, ActivityCost) VALUES
(301, 1, 'Eiffel Tower Visit', 25.00),
(302, 1, 'Louvre Museum', 20.00),
(303, 2, 'London Eye', 30.00),
(304, 2, 'Theatre Show', 75.00),
(305, 3, 'Colosseum Tour', 40.00),
(306, 3, 'Vatican City Tour', 60.00);

SELECT *
FROM Cities
WHERE Country = 'France' OR Country = 'UK' OR Country = 'Italy';

SELECT SUM(DailyCost * NumberOfNights) AS TotalAccommodationCost
FROM Accommodations;

SELECT T1.CityName, SUM(T2.ActivityCost) AS TotalActivityCost
FROM Cities AS T1
JOIN Activities AS T2
  ON T1.CityID = T2.CityID
GROUP BY T1.CityName
ORDER BY TotalActivityCost DESC;

SELECT
  T1.CityName,
  T2.ActivityName,
  T2.ActivityCost
FROM Cities AS T1
JOIN Activities AS T2
  ON T1.CityID = T2.CityID
WHERE T2.ActivityCost = (SELECT MAX(ActivityCost) FROM Activities);
